before_script:
  - pip install -r requirements.txt

coverage:
    image: python:3.6
    script:
        - cd catan/
        - python manage.py makemigrations board card game lobby player resource road settlement
        - python manage.py migrate 
        - coverage run --source='.' manage.py test
        - coverage html
        - coverage report
    coverage: '/TOTAL.+ ([0-9]{1,3}%)/'

test:pylint:
    image: python:3.6
    script:
        - flake8 --exclude='migrations*, settings*' .

# test:unittest:
#     image: python:3.6
#     script:
#         - cd catan/
#         - python manage.py makemigrations board card game lobby player resource road settlement
#         - python manage.py migrate 
#         - python manage.py test
